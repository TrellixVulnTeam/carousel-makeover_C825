<!DOCTYPE html>
<html lang="en" >

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Tiktik</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="css/font-awesome.css">

    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Design Bootstrap -->
    <link href="css/mdb.min.css" rel="stylesheet">

    <!--<link href="css/pignose.calendar.css" rel="stylesheet">-->
    <!-- <link type="text/css" rel="stylesheet" href="dist/firebaseui.css" /> -->
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.5.1/firebaseui.css" />

    <!-- Template styles -->
    <style rel="stylesheet">
        /* TEMPLATE STYLES */
        /* Necessary for full page carousel*/
        .flex-center {
            margin-top: 35%;
        }

        .carousel-caption {
            height: 100%;
            width: 100%;
            margin-left: -15%;
            /*background: red;*/
            /*padding-top: 7rem;*/
            overflow-y: scroll;
        }

        #topbar{
            margin: 0 auto;
        }

        #bars{
            position: relative;
            margin: 15px auto 0 auto;
            width: 62px;
            height: 30px;
            -webkit-box-reflect: below 1px linear-gradient(color-stops(transparent, rgba(#fff,.2)));
        }
        .bar{
            position: absolute;
            bottom: 0;
            width: 4px;
        }
        #bars .bar:nth-child(1){
            background: #FFFFFF;
            opacity: 1;
            height: 10px;
            left: 0px;
        }
        #bars .bar:nth-child(2){
            background: #FFFFFF;
            opacity: 1;
            height: 15px;
            left: 5px;
        }
        #bars .bar:nth-child(3){
            background: #FFFFFF;
            opacity: 1;
            height: 20px;
            left: 10px;
        }
        #bars .bar:nth-child(4){
            background: #FFFFFF;
            opacity: 1;
            height: 25px;
            left: 15px;
        }
        #bars .bar:nth-child(5){
            background: #FFFFFF;
            opacity: 1;
            height: 30px;
            left: 20px;
        }
        .card-main {
            background: #2c3e50;  /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #3498db, #2c3e50);  /* Chrome 10-25, Safari 5.1-6 */
            background: linear-gradient(to right, #3498db, #2c3e50); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */


            padding-top: 20px;
padding-bottom: 20px;


        }

        .address-card {
            background: #2c3e50;  /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #3498db, #2c3e50);  /* Chrome 10-25, Safari 5.1-6 */
            background: linear-gradient(to right, #3498db, #2c3e50);
        }

        .footer {
            position: fixed;
            left: 0;
            bottom: 0;
            width: 100%;
            background-color: white;
            color: black;
            text-align: center;
        }

        .hoverable:hover {
            background: rgba(255,255,255,0.5);
        }

        .port-pane{
            display: none;
        }

        .buy-pane {
            display:none;
        }

        .pignose-calendar .icon-arrow-left:before {
          content: '<';
        }
        .pignose-calendar .icon-arrow-right:before {
          content: '>';
        }
        
    </style>

</head>

<body>



    <!--Carousel Wrapper-->
    <div id="video-carousel-example2" class="carousel slide carousel-fade" data-ride="carousel">

        <!--Slides-->
        <div class="carousel-inner" role="listbox">
            <!--First slide-->
            <div class="carousel-item active">
                <!--Mask color-->
                <div class="view hm-black-light">
                    <div class="full-bg-img"><img src="https://www.planwallpaper.com/static/images/518164-backgrounds.jpg"></div>
                    <!--Video source-->
                    <!-- <video class="video-full" autoplay loop>
                        <source src="https://mdbootstrap.com/img/video/Tropical.mp4" type="video/mp4" />
                    </video> -->
                    
                </div>
                <div class="carousel-caption">
                    <div class="col-sm-12 animated fadeIn" style="margin-top: 50px">
                        <div class="row">
                        <div class="col-sm-3"></div>
                        <div class="card-main col-md-6" style="border-radius:0px">
                            <h1 style="color: #ffffff">TikTik</h1>
                            <div class="col-md-12">
                            <div class="row">
                                <div class="col-sm-6">
                                    <button class="buy-jio btn btn-primary col-sm-8" style="border-radius: 50px">Buy JIO</button>
                                </div>
                            
                            <div class="col-sm-6">
                                <button class="port btn btn-primary col-sm-8" style="border-radius: 50px">Port JIO</button>
                            </div>

                            

                        </div></div>
                            <div class="main-pane">
                                <div class="card">
                                    <h4 class="black-text mainaddress">Address:</h4>
                                </div>
                            </div>

                            <div class="port-pane">
                                <div class="col-sm-12">
                                    <div class="card">
                                        <div class="col-sm-12" style="padding: 20px 20px 20px 20px">
                                            <div class="col-sm-3">
                                                <i class="back-to-main-pane fa fa-arrow-left fa-2x black-text" style="cursor: pointer"></i>
                                            </div>
                                            <div class="col-sm-6" style="margin: 0 auto">
                                                <i class="fa fa-send fa-5x blue-text"></i>
                                                <p style="color:#000; font-size: medium"><br><br>Send the following text message <br><br> <strong>PORT</strong> followed by your 10-digit mobile number to TRAI's central number for mobile number portability - <strong>1900</strong>. <br>Example:<br> Send <strong>'PORT 98xxxxxx98'</strong> to <strong>1900</strong>. <br><br>You'll receive an SMS back with a Port out code</p>
                                            </div>
                                            <div class="col-sm-3"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="buy-pane">
                                <div class="card white hoverable"  id="" style="padding: 20px 20px 20px 20px;">
                                    <h3 style="color:#000;width:100%"><i style="float:left;cursor: pointer" class="back-to-main-pane fa fa-arrow-left black-text"></i>Order JIO Sim Card</h3>
                                    <div id="firebaseui-spa">
                                        <div id="firebaseui-container"></div>
                                    </div>
                                </div>
                            </div>

                            <!--<div class="otp-pane">-->

                            <!--</div>-->

                            <div class="form-pane" style="display: none">
                                <div class="card white hoverable"  id="form-pane-card" style="padding: 20px 20px 20px 20px;">
                                    <h3 style="color:#000;width:100%"><i style="float:left;cursor: pointer" class="back-to-main-pane fa fa-arrow-left black-text"></i>Order JIO Sim Card</h3>
                                    <div class="md-form" style="text-align: left">
                                        <i class="fa fa-user prefix fa-3x grey-text" style="margin-top: 7px"></i>
                                        <input type="text" class="form-control" id="order_fname" name="order_fname" required>
                                        <label for="order_fname">First Name</label>
                                    </div>
                                    <div class="md-form" style="text-align: left">
                                        <i class="fa fa-user prefix fa-3x grey-text" style="margin-top: 7px"></i>
                                        <input type="text" class="form-control" id="order_lname" name="order_lname" required>
                                        <label for="order_lname">Last Name</label>
                                    </div>
                                    <div class="md-form" style="text-align: left">
                                        <i class="fa fa-user prefix fa-3x grey-text" style="margin-top: 7px"></i>
                                        <input type="email" class="form-control" id="order_email" name="order_email" required>
                                        <label for="order_email">Email</label>
                                    </div>
                                    <div class="md-form" style="text-align: left">
                                        <i class="fa fa-user prefix fa-3x grey-text" style="margin-top: 7px"></i>
                                        <input type="text" class="form-control" id="order_pin" name="order_pin" required>
                                        <label for="order_pin">PinCode</label>
                                    </div>

                                    <div class="md-form">
                                        <i class="fa fa-pencil prefix grey-text"></i>
                                        <textarea type="text" id="order_addr" name="order_addr" class="md-textarea" style="height: 100px"></textarea>
                                        <label for="order_addr">Description *</label>
                                    </div>
                                    <div class="md-form">
                                        <!--<div class="radio">-->
                                        <button  name="store" id="store">Store PickUp</button>
                                        <!--</div>-->
                                        <!--<div class="radio">-->
                                        <button  name="home" id="home">Home Delivery</button>
                                        <!--</div>-->
                                    </div>
                                    <div class="md-form text-center">
                                        <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>
                                        <button class="btn btn-primary" id="book-a-slot"><i class="fa fa-list fa-1x"></i>&nbsp; Book a Slot</button>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-3"></div>
                    </div>
                    </div>
                </div>
            </div>
            <!--/First slide-->

            
        </div>
        <!--/.Slides-->

        
    </div>
    <!--/.Carousel Wrapper-->

    <!--/.Main layout-->


    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="calendar" style="width: 500px;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
    
    <div class="footer">TRAI data analysed by TikTik</div>

    <!-- SCRIPTS -->

    <!-- JQuery -->
    <!--<script src="js/jquery-1.4.4.min.js"></script>-->
    <script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/firebaseui/2.5.1/firebaseui.js"></script>
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script src="config.js"></script>
    <script src="common.js"></script>
    <!--<script src="dist/firebaseui.js"></script>-->
    <script src="app.js"></script>


    <!-- Bootstrap dropdown -->
    <script type="text/javascript" src="js/popper.min.js"></script>

    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>

    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="js/mdb.min.js"></script>

    <script type="text/javascript" src="js/guage.js"></script>

    <script type="text/javascript" src="js/moment.js"></script>
    <!--<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/hmac-sha256.js"></script>-->
    <!--<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/enc-base64-min.js"></script>-->
    <!--<script type="text/javascript" src="js/pignose.calendar.js"></script>-->


    <!--<script src="js/jquery-ui-1.8.11.custom.min.js"></script>-->
    <!--<script src="js/jquery-ui-i18n.js"></script>-->
    <!--<script src="js/date.js"></script>-->
    <!--<script src="js/jquery.weekcalendar.js"></script>-->

    <script>
        $(function() {
            $(window).on( 'resize', function () {
                $('.view').width( $(this).width());
                $('.view').height( $(this).height());
            }).resize();





            $("#order_mobnum").on('keydown', function(evt) {
                if($("#order_mobnum").val().length == 9){
                    $("#getotp").removeAttr('disabled');
                }else{
                    $("#getotp").attr('disabled','disabled');
                }
                evt = (evt) ? evt : window.event;
                var charCode = (evt.which) ? evt.which : evt.keyCode;
                // alert(charCode);
                if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                    return false;
                }
                return true;
            });
            var areaid = null;
            $("#order_pin").on('keypress', function(evt) {
                if(evt.which == 13){

                    var url = "https://darpn.in/v1.0/jiostore/pincode/"+$("#order_pin").val();
                    alert(url);
                    $.ajax({
                        url: url,
                        type: "GET",
                        beforeSend: function(request) {
                            request.setRequestHeader("Authorization", "Basic dGlrdGlrOjEyMw==");
                            alert("sending now");
                        },
                        cache: true,
                        success: function(html){
                            $('#order_addr').val(html['address'][0]['storeaddress']);
                            areaid = html['address'][0]['areaid'];
                        }
                    });
                }
                evt = (evt) ? evt : window.event;
                var charCode = (evt.which) ? evt.which : evt.keyCode;
                // alert(charCode);
                if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                    return false;
                }
                return true;
            });




            var address={};
            var resultFinal={};



            var  wlat,wlong;
            if (navigator.geolocation) 
                {
                    navigator.geolocation.getCurrentPosition(getLocation);
                }
            else 
                {
                x.innerHTML = "Geolocation is not supported by this browser.";
                }
            function getLocation(position) 
            {
                wlat = position.coords.latitude;
                wlong = position.coords.longitude;
                $.ajax
                   ({
                        type:"GET",
                        dataType:"json",
                           url: "https://darpn.in/networkrating/?latitude="+wlat+"&longitude="+wlong, 
                           success: function(result)
                           {
                             getAddress(wlat,wlong)
                             resultFinal=result;
                           }
                   });  
           }

            function getAddress(wlat,wlong)
            {
                $.ajax
                ({
                    type:"GET",
                    dataType:"json",
                    url: "https://maps.googleapis.com/maps/api/geocode/json?latlng="+wlat+","+wlong,
                    success: function(result)
                    {
                        address = result["results"][0]["formatted_address"];
                        $('.mainaddress').append('<h6 class="black-text">'+address+'</h6>');
                        CreateTableFromJSON(resultFinal)
                    }
                });
            }

            var opts = {
                angle: 0,
                lineWidth: 0.15,
                radiusScale: 0.5,
                percentColors: [
                    [0.0, "#FFECB3"],
                    [0.1, "#FFE082"],
                    [0.2, "#FFD54F"],
                    [0.3, "#FF9800"],
                    [0.4, "#FB8C00"],
                    [0.5, "#F57C00"],
                    [0.6, "#84FFFF"],
                    [0.7, "#18FFFF"],
                    [0.8, "#76FF03"],
                    [0.9, "#76FF03"],
                    [1.0, "#76FF03"]
                ],
                pointer: {
                    length: 0.4,
                    strokeWidth: 0.035,
                    color: '#ffffff'
                },

                strokeColor: '#9FA8DA'
            };

            function CreateTableFromJSON(results) {
                for (var i =0 ;  i< results.length; i++) {
                    var divset = '<div class="hoverable" style="display: flex; padding: 2px 5px 2px 5px; margin-top: 5px">\n' +
                        '                                    <div class="col-sm-6">\n' +
                        '                                        <img class="white" src="imgs/'+results[i]['operator']+'.png" style="width: 70px; height: 70px">\n' +
                        '                                    </div>\n' +
                        '                                    <div class="col-sm-2">\n' +
                        '                                        <div id="bars">\n';
                    var nextstr = '</div>\n' +
                        '                                    </div>\n' +
                        '                                    <div class="col-sm-4">\n' +
                        '                                        <div id="ratinglabel'+i+'" style="color: #ffffff"></div>\n' +
                        '                                       <canvas width="70" height="70" id="canvas'+i+'" style="margin-top: -35px"></canvas> \n' +
                        '                                    </div>\n' +
                        '                                </div>';
                    var barsstr = "";
                    for(var j=0; j<5; j++) {
                        if(j <  results[i]['voice-rating']){
                            barsstr = barsstr + '<div class="bar"></div>';
                        }else {
                            barsstr = barsstr + '<div class="bar" style="opacity: 0.5"></div>';
                        }

                    }
                    $('.main-pane').append(divset+barsstr+nextstr);
                    var target = document.getElementById('canvas'+i);
                    var gauge = new Gauge(target).setOptions(opts);
                    gauge.setTextField(document.getElementById('ratinglabel'+i));
                    gauge.maxValue = 5;
                    gauge.setMinValue(0);
                    gauge.animationSpeed = 256;
                    gauge.set(results[i]['data-rating']);
                }
            }

            $('.port').click(function(){
                $('.buy-pane').hide();
                $('.main-pane').hide();
                $('.form-pane').hide();
                $('.port-pane').show();
            });
            $('.back-to-main-pane').click(function(){
                $('.buy-pane').hide();
                $('.port-pane').hide();
                $('.form-pane').hide();
                firebase.auth().signOut();
                $('.main-pane').show();
            });
            $('.buy-jio').click(function () {
                $('.main-pane').hide();
                $('.port-pane').hide();
                $('.form-pane').show();
                $('.buy-pane').hide();
                $('.firebaseui-country-selector').hide();
                $('.firebaseui-id-phone-number').val("+91");
                $('.firebaseui-id-phone-number').focus();
            });

            $('#store').click(function (event) {
                var date = new Date();
                var obj = { "callName":"getslots", "areaId": areaid, "dateTime": date.getTime()};
                $.ajax
                ({
                    type:"POST",
                    beforeSend: function(request) {
                        request.setRequestHeader("Content-Type", "application/json");
                    },
                    data: JSON.stringify(obj),
                    url: "http://10.2.193.72:8888/gettimeslots",
                    success: function(result)
                    {
                        alert(date.getTime());
                        alert(result);
                    }
                });
            });

            $('#home').click(function (event) {
                var date = new Date();
                alert('here it is');
                $.ajax
                ({
                    type:"POST",
                    beforeSend: function(request) {
                        request.setRequestHeader("Content-Type", "application/json");
                    },
                    data: {'callName':'getslots', 'areaId': areaid, 'dateTime': date.getTime()},
                    url: "http://10.2.193.72:8888/gettimeslots",
                    success: function(result)
                    {
                        alert(result);
                    }
                });
            });

        });
    </script>


</body>

</html>